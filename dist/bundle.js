"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var react=require("react");function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(r,!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){var r=[],a=!0,n=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done)&&(r.push(c.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(n)throw o}}return r}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var useWordPress=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/?rest_route=/wp/v2",t=react.useState(),r=_slicedToArray(t,2),a=r[0],n=r[1],o=react.useState(),c=_slicedToArray(o,2),i=c[0],s=c[1],u=react.useState([]),d=_slicedToArray(u,2),l=d[0],f=d[1],y=react.useState(!1),g=_slicedToArray(y,2),v=g[0],p=g[1],b=react.useState(),h=_slicedToArray(b,2),w=h[0],_=h[1],P=react.useState(0),O=_slicedToArray(P,2),m=O[0],S=O[1],j=react.useState(0),T=_slicedToArray(j,2),A=T[0],I=T[1];react.useEffect(function(){w&&!i&&K(w)},[w]);var W=async function(t,r,a){p(!0);var o="".concat(e).concat(t);try{var c=await fetch(o,a);if(!c.ok)throw new Error;var i=await c.json();S(parseInt(c.headers.get("X-WP-Total"))),I(parseInt(c.headers.get("X-WP-TotalPages"))),r&&r(i)}catch(e){n(e)}finally{p(!1)}},E="&_embed",D=async function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"posts",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=k(t),n="/".concat(e).concat(a?"&".concat(a):"").concat(r?E:"");await W(n,function(e){_(e)})},B=async function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"posts",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e){var n=k(r),o="/".concat(t,"/").concat(e).concat(n?"&".concat(n):"").concat(a?E:"");await W(o,function(e){_(e)})}},x=async function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"posts",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e){var n="&_embed",o=k(_objectSpread2({},r,{slug:e})),c="/".concat(t,"&").concat(o).concat(a?n:"");await W(c,function(e){_(e)})}},K=function(e){if(e&&e._embedded){var t=e._embedded;s(t),L(t)}},L=function(e){e&&e["wp:featuredmedia"]&&f(e["wp:featuredmedia"])},M=async function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];await B(e,"pages",t,r)},R=async function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];await x(e,"pages",t,r)},k=function(e){var t=new URLSearchParams;if(e)for(var r in e)Object.hasOwnProperty.call(e,r)&&"_embed"!==r&&t.append(r,e[r]);return t.toString()};return{data:w,embedded:i,error:a,featuredMedia:l,fetchData:W,get:D,getById:B,getBySlug:x,getEmbedded:K,getFeaturedMedia:L,getPageById:M,getPageBySlug:R,loading:v,total:m,totalPages:A}};exports.useWordPress=useWordPress;
