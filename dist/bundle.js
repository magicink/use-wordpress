"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var react=require("react");function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(r,!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return r}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var useWordPress=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/?rest_route=/wp/v2",t=react.useState(),r=_slicedToArray(t,2),n=r[0],a=r[1],o=react.useState(!1),c=_slicedToArray(o,2),i=c[0],s=c[1],l=react.useState(),u=_slicedToArray(l,2),y=u[0],f=u[1],d=react.useState(0),p=_slicedToArray(d,2),v=p[0],g=p[1],h=react.useState(0),b=_slicedToArray(h,2),w=b[0],_=b[1],P=async function(t,r,n){s(!0);var o="".concat(e).concat(t);try{var c=await fetch(o,n);if(!c.ok)throw new Error;var i=await c.json();g(parseInt(c.headers.get("X-WP-Total"))),_(parseInt(c.headers.get("X-WP-TotalPages"))),r&&r(i)}catch(e){a(e)}finally{s(!1)}},O="&_embed",j=async function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"posts",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=T(t),a="/".concat(e).concat(n?"&".concat(n):"").concat(r?O:"");await P(a,function(e){f(e)})},S=async function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"posts",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=T(r),o="/".concat(t,"/").concat(e).concat(a?"&".concat(a):"").concat(n?O:"");await P(o,function(e){f(e)})},m=async function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"posts",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a="&_embed",o=T(_objectSpread2({},r,{slug:e})),c="/".concat(t,"&").concat(o).concat(n?a:"");await P(c,function(e){f(e)})},T=function(e){var t=new URLSearchParams;if(e)for(var r in e)e.hasOwnProperty(r)&&"_embed"!==r&&t.append(r,e[r]);return t.toString()};return{data:y,error:n,fetchData:P,get:j,getById:S,getBySlug:m,loading:i,total:v,totalPages:w}};exports.useWordPress=useWordPress;
