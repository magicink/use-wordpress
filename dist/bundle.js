"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var react=require("react");function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(r,!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){var r=[],a=!0,n=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done)&&(r.push(c.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(n)throw o}}return r}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var useWordPress=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/?rest_route=/wp/v2",r=react.useState(),a=_slicedToArray(r,2),n=a[0],o=a[1],c=react.useState(),i=_slicedToArray(c,2),s=i[0],d=i[1],l=react.useState([]),u=_slicedToArray(l,2),f=u[0],y=u[1],g=react.useState(!1),v=_slicedToArray(g,2),h=v[0],p=v[1],b=react.useState(),w=_slicedToArray(b,2),P=w[0],_=w[1],m=react.useState(0),O=_slicedToArray(m,2),S=O[0],j=O[1],T=react.useState(0),A=_slicedToArray(T,2),E=A[0],W=A[1];react.useEffect(function(){P&&!s&&x(P)},[P]);var I=async function(r,a){p(!0);var n="".concat(t).concat(r);try{if(!(await fetch(n,{headers:{"X-WP-Nonce":e},method:"DELETE"})).ok)throw new Error;a&&a()}catch(e){o(e)}finally{p(!1)}},D=async function(r,a){p(!0);var n="".concat(t).concat(r);try{var c=await fetch(n,{"X-WP-Nonce":e});if(!c.ok)throw new Error;var i=await c.json();j(parseInt(c.headers.get("X-WP-Total"))),W(parseInt(c.headers.get("X-WP-TotalPages"))),a&&a(i)}catch(e){o(e)}finally{p(!1)}},B="&_embed",L=async function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"posts",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=q(t),n="/".concat(e).concat(a?"&".concat(a):"").concat(r?B:"");await D(n,function(e){_(e)})},X=async function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"posts",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e){var n=q(r),o="/".concat(t,"/").concat(e).concat(n?"&".concat(n):"").concat(a?B:"");await D(o,function(e){_(e)})}},k=async function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"posts",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e){var n="&_embed",o=q(_objectSpread2({},r,{slug:e})),c="/".concat(t,"&").concat(o).concat(a?n:"");await D(c,function(e){_(e)})}},x=function(e){if(e&&e._embedded){var t=e._embedded;d(t),K(t)}},K=function(e){e&&e["wp:featuredmedia"]&&y(e["wp:featuredmedia"])},M=async function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];await X(e,"pages",t,r)},R=async function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];await k(e,"pages",t,r)},H=async function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];await X(e,"posts",t,r)},N=async function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];await k(e,"posts",t,r)},q=function(e){var t=new URLSearchParams;if(e)for(var r in e)Object.hasOwnProperty.call(e,r)&&"_embed"!==r&&t.append(r,e[r]);return t.toString()};return{data:P,deleteData:I,embedded:s,error:n,featuredMedia:f,fetchData:D,get:L,getById:X,getBySlug:k,getEmbedded:x,getFeaturedMedia:K,getPageById:M,getPageBySlug:R,getPostById:H,getPostBySlug:N,loading:h,total:S,totalPages:E}};exports.useWordPress=useWordPress;
